# Matrix config
server {
        listen {{ matrix_federation_port }} ssl;
        listen [::]:{{ matrix_federation_port }} ssl;

        server_name {{ full_domain }};

        ssl_certificate {{ nginx_cert }};
        ssl_certificate_key {{ nginx_cert_key }};

        location / {
                proxy_pass http://{{ docker_host }}:{{ matrix_synapse_port }};
                proxy_set_header Host $host;
                proxy_cache_bypass $http_upgrade;
        }
}

